<!--
	This Basic theme serves as an example for how to create other
	themes by demonstrating the features with minimal HTML and CSS.
	Comments like this will be through the code to explain briefly
	what each feature is and point you to the MkDocs documentation
	to find out more.
-->
<!DOCTYPE html>
<head>
	
	<meta charset="UTF-8" />
	
	<!--
		The page_title contains the title for a page as shown in the navigation.
		Site name contains the name as defined in the mkdocs.yml
	-->
	<title>16 فصل شانزده - تفکر پایتونی</title>

	<!--
		Support custom favicon support.
		http://www.mkdocs.org/user-guide/configuration/#site_favicon
	-->
	
		<link rel="shortcut icon" href="../img/favicon.ico">
	

	<!--
		You can include external assets of course, but be aware that it means the
		documentation may not work well offline.
	-->
	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">

	<link rel="stylesheet" href="../css/theme.css">

	<!--
		extra_ess contains paths to CSS files in the users
		documentation directory or a list of CSS files defined in
		their mkdocs.yml.

		http://www.mkdocs.org/user-guide/configuration/#extra_css
	-->
	

	<link rel="stylesheet" href="../css/darkula.css">
	<script src="../js/highlight.pack.js"></script>
	
	<!--
		Include Google Analytics tracking code.

		http://www.mkdocs.org/user-guide/configuration/#google_analytics
	-->
	

	
	
</head>

<body>

	<div class="sidebar left">

		<ul>
		
			
				
				

	<li >
	
		<a href="..">Home</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../01-فصل اول/">01 فصل اول</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../02-فصل دوم/">02 فصل دوم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../03-فصل سوم/">03 فصل سوم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../04-فصل چهارم/">04 فصل چهارم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../05-فصل پنجم/">05 فصل پنجم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../06-فصل ششم/">06 فصل ششم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../07-فصل هفتم/">07 فصل هفتم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../08-فصل هشتم/">08 فصل هشتم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../09-فصل نهم/">09 فصل نهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../10-فصل دهم/">10 فصل دهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../11-فصل یازدهم/">11 فصل یازدهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../12-فصل دوازدهم/">12 فصل دوازدهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../13-فصل سیزدهم/">13 فصل سیزدهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../14-فصل چهاردهم/">14 فصل چهاردهم</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../15-فصل پانزدهم/">15 فصل پانزدهم</a>
		
	</li>


			
			
				
				

	<li class="active">
	
		<a href="./">16 فصل شانزده</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../17-فصل هفده /">17 فصل هفده </a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../18-فصل هجده/">18 فصل هجده</a>
		
	</li>


			
			
				
				

	<li >
	
		<a href="../19-فصل نوزده/">19 فصل نوزده</a>
		
	</li>


			
			
		
		</ul>
		
	</div>
	
	<div class="body rel right">
	
		<header>
		
			<div class="right">
			
				<h1>16 فصل شانزده - تفکر پایتونی</h1>
			
			</div>
		
			<div role="search" class="left">
			
				<form action="../search.html" class="rel" method="get">
				
					<input type="text" name="q" placeholder="جستجو" />
					
					<input type="submit" class="abs search-submit" value="" />
					
				</form>
				
			</div>
		
		</header>
		
		<main class="rel oh">
		
			
		
				<div class="left toc">
				
					<ul>
						
						
						
					</ul>
					
				</div>
			
			
			
			<div class="right content">
		
				
					
					<p><strong>فصل ۱۶</strong></p>
<p><strong>کلاس ها و توابع </strong></p>
<p>در این مرحله که نحوه تعریف داده جدید را یاد گرفته ایم، مرحله بعد تعریف
توابعی است که پارامتر ورودی و خروجی آنها اشیایی می باشد که توسط برنامه
نویس تعریف شده است.</p>
<p><strong>Time</strong></p>
<p>یکی از انواع داده ها که توسط کاربر تعریف می شود Time می باشد که زمان را
ثبت می کند. برای استفاده از این نوع داده، کلاسی از جنس نوع داده Time
تعریف می کنیم. نحوه تعریف کلاس به صورت زیر می باشد:</p>
<p>Class Time</p>
<p>attributes: hour, minute, second</p>
<p>می توان کلاسی از نوع داده Time تعریف کرد و ويژگی های آن را مقدار دهی
کرد.</p>
<p>time = Time()\
time.hour = 11\
time.minute = 59\
time.second = 30\</p>
<p>نمودار حالت برای شیء Time در شکل ۱۶.۱ نمایش داده شده است.</p>
<p>به عنوان تمرین، تابعی به نام print_time بنویسید که شیء Time را به عنوان
ورودی دریافت کند و زمان را به فرمت hour:minute:second در خروجی نمایش
دهد. توجه: '%.2d' عدد را به صورت صحیح تا دو رقم نمایش می دهد.</p>
<p>تمرین، تابعی به نام is_after بنویسید که دو آرگومان ورودی از جنس شیء
Time دریافت کند به نام t1 و t2، خروجی تابع در صورتیکه t1 بعد از t2 باشد
True و در غیر اینصورت خروجی False است.</p>
<p><strong>توابع خالص </strong></p>
<p>در بخش های بعدی، توابعی را خواهیم نوشت که مقادیر زمان را با هم جمع
میکنند. دو نوع تابع را نشان می دهند: توابع خالص و تغییر یافته. همچنین
روند طراحی نمونه یا بسته را نشان می دهند که یک راه مقابله با برنامه های
پیچیده، شکستن برنامه به بسته های ساده تر است. در ادامه نمونه ساده
add_time را نشان می دهیم:</p>
<p>def add_time(t1, t2):\
 sum = Time()</p>
<p>sum.hour = t1.hour + t2.hour \
 sum.minute = t1.minute + t2.minute\
 sum.second = t1.second + t2.second\
 return sum\</p>
<p>این تابع دو آرگومان ورودی از نوع شیء Time از ورودی دریافت کرده و sum را
از نوع شیء Time تعریف میکند که مقادیر ویژگی ها آن برابر با مجموع مقادیر
ویژگی های آرگومان های ورودی تابع است. این تابع خالص است از این جهت که
شیء ورودی که به عنوان آرگومان ورودی تابع در نظر گرفته می شود مقادیر
ویژگی هایش تغییر نمی کند.</p>
<p>برای تست تابع نوشته شده دو شیء از نوع Time تعریف می شود به نام های start
و duration که به ترتیب زمان شروع فیلم و مدت زمان پخش فیلم را نشان می
دهند. و ویژگی های هر دو شیء به صورت زیر مقدار دهی می شوند.</p>
<p>&gt;&gt;&gt; start = Time()\
&gt;&gt;&gt; start.hour = 9\
&gt;&gt;&gt; start.minute = 45\
&gt;&gt;&gt; start.second = 0\</p>
<p>&gt;&gt;&gt; duration = Time()\
&gt;&gt;&gt; duration.hour = 1\
&gt;&gt;&gt; duration.minute = 35\
&gt;&gt;&gt; duration.second = 0\
\</p>
<p>تابع add_time زمان اتمام فیلم را محاسبه میکند.</p>
<p>&gt;&gt;&gt; done = add_time(start, duration)\
&gt;&gt;&gt; print_time(done)\
10:80:00\</p>
<p>نتیجه چیزی که ما انتظار داریم نیست به دلیل اینکه ۸۰ برای ثانیه بی معنی
است. دلیل این اتفاق نبود قوانینی است که منجر به محاسبه درست زمان می شود.
برای نشان دادن زمان درست در تابع تغییراتی به صورت زیر اعمال میکنیم.</p>
<p>def add_time(t1, t2):\
 sum = Time()</p>
<p>sum.hour = t1.hour + t2.hour\
 sum.minute = t1.minute + t2.minute\
 sum.second = t1.second + t2.second\</p>
<p>if sum.second &gt;= 60:\
 sum.second -= 60</p>
<p>sum.minute += 1</p>
<p>if sum.minute &gt;= 60:\
 sum.minute -= 60</p>
<p>sum.hour += 1</p>
<p>return sum</p>
<p>تابع نوشته شده درست زمان را محاسبه می کند در ادامه جایگزین کوتاه تری
برای این تابع خواهیم داشت.</p>
<p><strong>تغییر یافته </strong></p>
<p>در برخی موارد با توجه به تعریف مساله نیاز به توابعی داریم که مقادیر
ویژگی های آرگومان های ورودی در صورت نیاز تغییر میکند. به این توابع تغییر
یافته می گویند. در ادامه increment نمونه ای از modifier ها می باشد را
نشان میدهیم.</p>
<p>def increment(time, seconds):\
 time.second += seconds\</p>
<p>if time.second &gt;= 60:\
 time.second -= 60\
 time.minute += 1\</p>
<p>if time.minute &gt;= 60:\
 time.minute -= 60\
 time.hour += 1\</p>
<p>تابع نوشته شده درست است ولی اگر مقدار ثانیه خیلی بزرگتر از ۶۰ باشد چه
اتفاقی می افتد؟</p>
<p>یک راه حل استفاده از شرط if و حلقه است. ولی با استفاده از حلقه کارایی
تابع کم می شود. به عنوان تمرین در این حالت تابع را بدون استفاده از حلقه
بنویسید.</p>
<p>هر چیزی که بتوان با modifier ها نوشت را میتوان با تابع خالص نوشت. در
واقع، برخی از زبان های برنامه نویسی فقط اجازه استفاده از توابع خالص را
می دهند. شواهدی وجود دارد حاکی از این موضوع که توسعه چنین برنامه های
سریع تر می باشد و همچنین میزان خطا در این برنامه ها کمتر است. اما
modifier ها راحت تر هستند و همچینن کارایی برنامه هایی که صرفا از توابع
خالص استفاده می کنند کمتر است.</p>
<p>به صورت کلی، بهتر است از توابع خالص در برنامه نویسی استفاده شود مگر
اینکه یک مزیت قانع کننده ای برای استفاده از modifier ها وجود داشته باشد.
این رویکرد مدل برنامه نویسی تابعی نام دارد.</p>
<p>به عنوان تمرین تابع خالص برای increment بنویسید.</p>
<p><strong>نمونه سازی در مقابل برنامه ریزی </strong></p>
<p>با اینجا برای برنامه نویسی از نمونه سازی استفاده شد. در نمونه سازی برای
هر بخش ساده یک نمونه ایجاد می شود که عملیات مشخصی را انجام می دهد و بعد
نوشتن نمونه تست می شود و در انتها نمونه ها در کنار هم قرار گرفته و
برنامه کلی را تشکیل می دهند و خطاهای برنامه بر طرف می شود.</p>
<p>این سبک در حالتی که دید خیلی عمیق نسبت به برنامه اصلی نداریم خوب است در
مقابل برطرف کردن خطاهای برنامه مشکل و زمان گیر است.</p>
<p>یک جایگزین، توسعه طراحی شده است. به این صورت که دید سطح بالا به برنامه
داشته باشیم. برای نمونه در مورد Time یک شیء است که ویژگی های آن ۳ عدد در
مبنای ۶۰ است.</p>
<p>هنگامی ما توابع add_time و increment را می نویسیم. به طور موثر می توان
در مبنای ۶۰ جمع را انجام دهیم.</p>
<p>یک پیشنهاد دیگر رهیافت به کل مساله است. به این صورت که زمان را تبدیل به
عملیات صحیح کرده و عملیات مورد نیاز را روی آن انجام دهیم. مزیت این روش
درک کامپیوتر از عملیات انجام شده بر روی اعداد صحیح است.</p>
<p>در ادامه مثالی از تبدیل زمان به عدد صحیح را داریم:</p>
<p>def time_to_int(time):\
 minutes = time.hour * 60 + time.minute\
 seconds = minutes * 60 + time.second\
 return seconds\</p>
<p>همچنین تابعی که عدد صحیح را به زمان تبدیل کند:</p>
<p>def int_to_time(seconds):\
 time = Time()</p>
<p>minutes, time.second = divmod(seconds, 60)\
 time.hour, time.minute = divmod(minutes, 60)\
 return time\</p>
<p>می توان این توابع را تست کرد که از نحوه عملکرد صحیح توابع مطمءن شد. یک
راه برای تست کردن مقادیر مختلف به صورت زیر است:</p>
<p>time_to_int(int_to_time(x)) == x</p>
<p>بعد از تست می توان این تابع را در داخل توابع دیگر استفاده کرد به عنوان
نمونه در تابع add_time به صورت زیر استفاده شده است:</p>
<p>def add_time(t1, t2):\
 seconds = time_to_int(t1) + time_to_int(t2)\
 return int_to_time(seconds)\</p>
<p>این ورژن از تابع کوتاه تر است و تصدیق آن راحت تر است. به عنوان تمرین
تابع increment را با توابع time_to_int و int_to_time باز نویسی کنید.</p>
<p><strong>اشکال زدایی </strong></p>
<p>شیء Time در صورتیکه ثانیه و دقیقه بین ۰ و ۶۰ باشد تابع خوش تعریفی است.
اما اگر ساعت عدد مثبتی باشد ساعت و دقیقه باید عدد کامل باشد و ثانیه می
تواند عدد کسری باشد.</p>
<p>پیش نیاز هایی که باید همیشه درست باشد invariant نامیده می شود. اگر این
پیش نیاز ها درست نباشد باعث می شود عملکرد تابع با مشکل روبرو می شود.</p>
<p>نوشتن توابعی که invariant ها را چک کند، به اشکال زدایی برنامه کمک می
کند. برای مثال می توان تابع avoid_time را با هدف اینکه اگر invariant
برقرار نباشد False بر می گرداند.</p>
<p>def valid_time(time):\
 if time.hour &lt; 0 or time.minute &lt; 0 or time.second &lt; 0:\</p>
<p>return False\
 if time.minute &gt;= 60 or time.second &gt;= 60:\</p>
<p>return False\
 return True\</p>
<p>می توان قبل استفاده از شیء از نوع Time آن را به صورت زیر چک کرد:</p>
<p>def add_time(t1, t2):\
 if not valid_time(t1) or not valid_time(t2):\</p>
<p>raise ValueError('invalid Time object in add_time')\
 seconds = time_to_int(t1) + time_to_int(t2)\
 return int_to_time(seconds)\</p>
<p>یا می توان از assert statement استفاده کرد که invariant را چک کند و در
صورتیکه درست نباشد خطا برگرداند:</p>
<p>def add_time(t1, t2):\
 assert valid_time(t1) and valid_time(t2)\
 seconds = time_to_int(t1) + time_to_int(t2)\
 return int_to_time(seconds)\</p>
<p>assert از این جهت که بین کد با شرایط نرمال و کدی که برای چک کردن خطا است
تفاوت قاءل می شود.</p>
<p><strong>واژه نامه</strong></p>
<hr />
<p><strong>prototype and patch: </strong>طرح<strong> </strong>توسعه برنامه که شامل نوشتن نمونه اولیه،
تست و خطایابی و اصلاح آنها می باشد.</p>
<p><strong>designed development: </strong>طرح توسعه برنامه که دید سطح بالا به برنامه
دارد و نیاز بیشتری به برنامه ریزی دارد نسبت به توسعه افزایشی یا توسعه
نمونه ها.</p>
<p><strong>pure function: </strong>توابعی که تغییری بر روی ویژگی های آرگومان های ورودی
تابع ایجاد نمی کنند.</p>
<p><strong>modifier </strong>توابعی می توانند ویژگی های آرگومان های ورودی خود را تغییر
دهند. خروجی این توابع void می باشد به این معنا که چیزی به عنوان خروجی بر
نمی گردانند.</p>
<p><strong>functional programming style: </strong>برنامه هایی که توابع استفاده شده در
برنامه pure function هستند.</p>
<p><strong>invariant: </strong>شرایطی که در طول زمان اجرای برنامه باید همیشه True باشند.</p>
<p><strong>assert statement: </strong>بیانی که شرایط را چک میکند و در صورت برقرار نبودن
exception رخ می دهد.</p>
<p><strong>تمرین 16.7</strong></p>
<p>کد مثال های این فصل در اینجا قابل دسترس است.
<a href="http://thinkpython.com/code/Time1.py"><em>http</em></a><a href="http://thinkpython.com/code/Time1.py"><em>://</em></a><a href="http://thinkpython.com/code/Time1.py"><em>thinkpython</em></a><a href="http://thinkpython.com/code/Time1.py"><em>.</em></a><a href="http://thinkpython.com/code/Time1.py"><em>com</em></a><a href="http://thinkpython.com/code/Time1.py"><em>/</em></a><a href="http://thinkpython.com/code/Time1.py"><em>code</em></a><a href="http://thinkpython.com/code/Time1.py"><em>/</em></a><a href="http://thinkpython.com/code/Time1.py"><em>Time</em></a><a href="http://thinkpython.com/code/Time1.py"><em>1.</em></a><a href="http://thinkpython.com/code/Time1.py"><em>py</em></a>
و راه حل های این مثال ها در اینجا موجودند:
<a href="http://thinkpython.com/code/Time1_soln.py"><em>http</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>://</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>thinkpython</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>.</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>com</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>/</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>code</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>/</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>Time</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>1_</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>soln</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>.</em></a><a href="http://thinkpython.com/code/Time1_soln.py"><em>py</em></a></p>
<p><strong>تمرین 6</strong></p>
<p>تابعی بنویسید به اسم mul_time که یک شی زمان و یک عدد میگیرد و یک شی
زمان جدید را برمیگرداند که شامل محصول زمان اولیه و عدد ورودی است.</p>
<p>حالا از mul_time استفاده کنید و تابع دیگری بنویسید که یک شی زمان میگیرد
که نشان دهنده زمان پایان یک مسابقه است و یک عدد که نمایش دهنده فاصله است
و شی زمانی را برمیگرداند که نشان دهنده میانگین سرعت بر اساس زمان است
(زمان بر مایل)</p>
<p><strong>تمرین 7</strong></p>
<p>ماژول datetime شی date و time را ارائه میکند که شبیه شی Date و Time
معرفی شده در این فصل است ولی این اشیا متدها و عملگر های بهتری دارند.
منابع را در این آدرس مطالعه کنید:
<a href="http://docs.python.org/2/library/datetime.html"><em>http</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>://</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>docs</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>.</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>python</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>.</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>org</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>/2/</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>library</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>/</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>datetime</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>.</em></a><a href="http://docs.python.org/2/library/datetime.html"><em>html</em></a></p>
<ol>
<li>از ماژول datetime برای نوشتن یک برنامه استفاده کنید که زمان فعلی را
    میگیرد و روز هفته را چاپ میکند.</li>
<li>برنامه ای بنویسید که تاریخ تولد را میگیرد و سن کاربر و روز ها و ساعت
    ها و دقایق و ثانیه های طی شده از روز تولد را چاپ کند.</li>
<li>برای دو نفر که در تاریخ های مختلف متولد شده اند یک روز وجود دارد که
    یکی از آنها دو برابر دیگری سن دارد. این روز روز دوبل آنهاست. برنامه
    ای بنویسید که دو تاریخ تولد را میگیرد و روز دوبل را محاسبه میکند.</li>
<li>برای چالش بیشتر نسخه جامع تری بنویسید که روزی که یک نفر n برابر
    دیگری سن دارد را چاپ کند.</li>
</ol>
				
				

			</div>

		</main>
	
		<footer class="oh">
		
			
			
			<a class="right" href="http://www.mkdocs.org">ساخته شده توسط: MkDocs.</a>

		</footer>
	
	</div>
	
	<!--
		To include static assets from our theme, just add
		.. beforehand which will be the relative path to
		the root of the documentation.
	-->
	<script src="../js/theme.js"></script>

	<!--
		extra_javascript contains paths to JavaScript files in the
		users documentation directory or a list of JavaScript files
		defined in their mkdocs.yml.

		http://www.mkdocs.org/user-guide/configuration/#extra_javascript
	-->
	

</body>
</html>